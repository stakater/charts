{{- if and ( .Values.jvmObservability.jvmMicrometer ) ( .Values.jvmObservability.jvmMicrometer.enabled ) }}
apiVersion: grafana.integreatly.org/v1beta1
kind: GrafanaDashboard
metadata:
  name: {{ .Values.name }}-dashboard
  labels:
    {{- include "jvm-observability.labels" . | nindent 4 }}
spec:
  folder: JVM micrometer
  allowCrossNamespaceImport: true
  instanceSelector:
    {{ toYaml .Values.instanceSelector | nindent 3 }}
  datasources:
    {{ toYaml .Values.datasources | nindent 3 }}
  configMapRef:
    name: {{ .Values.name }}-definition
    key: json
{{- end }}